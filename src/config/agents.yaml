# SubAgent and Tool Configuration
# This file defines which SubAgents and Tools are enabled and their settings

sub_agents:
  knowledge_search:
    enabled: true
    description: "ServiceNow公式ナレッジベースを検索"
    capabilities:
      - knowledge_search
      - case_search
    max_retries: 2
    retry_strategy:
      retry_conditions:
        - no_results
      query_modification: synonym
      backoff_seconds: 0.5
    tools:
      - servicenow_knowledge_search
      - servicenow_case_search

  vector_search:
    enabled: true
    description: "事前構築済みナレッジのベクトル検索"
    capabilities:
      - semantic_search
      - similarity_search
    max_retries: 3
    retry_strategy:
      retry_conditions:
        - no_results
        - low_relevance
      query_modification: llm_rewrite
      backoff_seconds: 0.5
    tools:
      - vector_db_search

  catalog:
    enabled: true
    description: "ServiceNowカタログから適切な申請先を調査"
    capabilities:
      - catalog_search
      - catalog_recommendation
    max_retries: 1
    retry_strategy:
      retry_conditions: []
      query_modification: none
      backoff_seconds: 0
    tools:
      - catalog_list
      - catalog_detail

tools:
  servicenow_knowledge_search:
    enabled: true
    description: "ServiceNowのナレッジベースを検索します"
    required_service_token: servicenow
    timeout_seconds: 30

  servicenow_case_search:
    enabled: true
    description: "ServiceNowのケース（チケット）を検索します"
    required_service_token: servicenow
    timeout_seconds: 30

  servicenow_table_detail:
    enabled: true
    description: "ServiceNowテーブルの詳細情報を取得します"
    required_service_token: servicenow
    timeout_seconds: 30

  vector_db_search:
    enabled: true
    description: "事前構築済みナレッジをセマンティック検索します"
    required_service_token: vector_db
    timeout_seconds: 30
    settings:
      default_top_k: 5
      default_threshold: 0.7

  catalog_list:
    enabled: true
    description: "ServiceNowサービスカタログの一覧を取得します"
    required_service_token: servicenow
    timeout_seconds: 30

  catalog_detail:
    enabled: true
    description: "ServiceNowサービスカタログの詳細情報を取得します"
    required_service_token: servicenow
    timeout_seconds: 30

# Execution settings
execution:
  parallel_timeout_seconds: 30
  sub_agent_timeout_seconds: 60
  tool_timeout_seconds: 30

# Default parallel execution groups
# These define which agents can run in parallel by default
parallel_groups:
  search_phase:
    agents:
      - knowledge_search
      - vector_search
    timeout_seconds: 30
